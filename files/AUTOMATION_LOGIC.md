# üß† –õ–û–ì–ò–ö–ê –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–ò - –ö–†–ê–¢–ö–ê–Ø –í–ï–†–°–ò–Ø

## üìä –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –î–ï–ô–°–¢–í–ò–ô

```
1Ô∏è‚É£ –ó–ê–ü–£–°–ö –ë–û–¢–ê
   ‚Üì
   ‚Ä¢ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Telegram
   ‚Ä¢ –ù–∞—Ö–æ–¥–∏—Ç @ACarriers_bot
   ‚Ä¢ –ù–∞—á–∏–Ω–∞–µ—Ç —Å–ª—É—à–∞—Ç—å –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —ç—Ç–æ–≥–æ –±–æ—Ç–∞
   
2Ô∏è‚É£ –ö–ê–ñ–î–û–ï –°–û–û–ë–©–ï–ù–ò–ï –û–¢ –ë–û–¢–ê
   ‚Üì
   ‚Ä¢ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (–µ—Å–ª–∏ –µ—Å—Ç—å)
   ‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —Ç—Ä–∏–≥–≥–µ—Ä
   
3Ô∏è‚É£ –ï–°–õ–ò –ù–ê–ô–î–ï–ù –¢–†–ò–ì–ì–ï–† "–ü–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–∑–∫–∏"
   ‚Üì
   ‚Ä¢ –°–¢–†–ê–¢–ï–ì–ò–Ø "first": –ù–∞–∂–∏–º–∞–µ—Ç –ü–ï–†–í–£–Æ –∫–Ω–æ–ø–∫—É
   ‚Ä¢ –°–¢–†–ê–¢–ï–ì–ò–Ø "custom": –ò—â–µ—Ç –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
   ‚Ä¢ –°–¢–†–ê–¢–ï–ì–ò–Ø "all": –ù–∞–∂–∏–º–∞–µ—Ç –í–°–ï –∫–Ω–æ–ø–∫–∏
   
4Ô∏è‚É£ STATE MACHINE (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ü–µ–ø–æ—á–∫–∞)
   ‚Üì
   [–®–∞–≥ 1] –ù–∞–∂–∞—Ç—å "–°–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤–æ–∑–æ–∫"
      ‚Üì
   [–®–∞–≥ 2] –í—ã–±—Ä–∞—Ç—å –ø–µ—Ä–≤—É—é –ø–µ—Ä–µ–≤–æ–∑–∫—É –∏–∑ —Å–ø–∏—Å–∫–∞
      ‚Üì
   [–®–∞–≥ 3] –ù–∞–∂–∞—Ç—å "–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å"
      ‚Üì
   ‚úÖ –ì–û–¢–û–í–û!
```

## üéØ 3 –°–¢–†–ê–¢–ï–ì–ò–ò –í–´–ë–û–†–ê –ö–ù–û–ü–û–ö

### 1. **"first"** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚≠ê
**–õ–æ–≥–∏–∫–∞:** –ë–µ—Ä–µ—Ç –ü–ï–†–í–£–Æ –∫–Ω–æ–ø–∫—É –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ

```
–†—è–¥ 1: [üîî –°–ø–∏—Å–æ–∫ –ø—Ä—è–º—ã—Ö] ‚Üê –ù–ê–ñ–ú–Å–¢ –≠–¢–£
–†—è–¥ 2: [üìã –ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã–µ]
–†—è–¥ 3: [üìã –ú–æ–∏ –ø–µ—Ä–µ–≤–æ–∑–∫–∏]
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–≤–∞—è

---

### 2. **"custom"** (–ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º)
**–õ–æ–≥–∏–∫–∞:** –ò—â–µ—Ç –∫–Ω–æ–ø–∫—É, —Å–æ–¥–µ—Ä–∂–∞—â—É—é –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ

```python
# –í config.py:
'BUTTON_KEYWORDS': ['–º–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω']

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
–†—è–¥ 1: [üîî –°–ø–∏—Å–æ–∫ –ø—Ä—è–º—ã—Ö]
–†—è–¥ 2: [üìã –ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã–µ] ‚Üê –ù–ê–ñ–ú–Å–¢ –≠–¢–£ (–µ—Å—Ç—å "–º–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω")
–†—è–¥ 3: [üìã –ú–æ–∏ –ø–µ—Ä–µ–≤–æ–∑–∫–∏]
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É

---

### 3. **"all"** (–≤—Å–µ –ø–æ–¥—Ä—è–¥)
**–õ–æ–≥–∏–∫–∞:** –ù–∞–∂–∏–º–∞–µ—Ç –í–°–ï –∫–Ω–æ–ø–∫–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏

```
1. –ù–∞–∂–∞—Ç—å [üîî –°–ø–∏—Å–æ–∫ –ø—Ä—è–º—ã—Ö]
   ‚è±Ô∏è –ø–∞—É–∑–∞ 0.05-0.15—Å
2. –ù–∞–∂–∞—Ç—å [üìã –ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã–µ]
   ‚è±Ô∏è –ø–∞—É–∑–∞ 0.05-0.15—Å
3. –ù–∞–∂–∞—Ç—å [üìã –ú–æ–∏ –ø–µ—Ä–µ–≤–æ–∑–∫–∏]
```

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

---

## ü§ñ –ú–ù–û–ì–û–®–ê–ì–û–í–ê–Ø –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø

–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –ø–µ—Ä–≤–æ–π –∫–Ω–æ–ø–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ü–µ–ø–æ—á–∫–∞**:

```mermaid
graph TD
    A[üéØ –¢–†–ò–ì–ì–ï–†] --> B[–ù–∞–∂–∞—Ç—å '–°–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤–æ–∑–æ–∫']
    B --> C[–ñ–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ]
    C --> D{–ü–æ–ª—É—á–µ–Ω —Å–ø–∏—Å–æ–∫?}
    D -->|–î–∞| E[–ù–∞–∂–∞—Ç—å –ü–ï–†–í–£–Æ –ø–µ—Ä–µ–≤–æ–∑–∫—É]
    E --> F[–ñ–¥–∞—Ç—å –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ]
    F --> G{–ü–æ–ª—É—á–µ–Ω—ã –¥–µ—Ç–∞–ª–∏?}
    G -->|–î–∞| H[–ù–∞–π—Ç–∏ –∫–Ω–æ–ø–∫—É '–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å']
    H --> I[–ù–∞–∂–∞—Ç—å –µ—ë]
    I --> J[‚úÖ –ì–û–¢–û–í–û!]
```

**–°–æ—Å—Ç–æ—è–Ω–∏—è (State Machine):**
- `None` - –ñ–¥–µ–º —Ç—Ä–∏–≥–≥–µ—Ä–∞
- `waiting_list` - –ñ–¥–µ–º —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–≤–æ–∑–æ–∫
- `waiting_details` - –ñ–¥–µ–º –¥–µ—Ç–∞–ª–∏ –ø–µ—Ä–µ–≤–æ–∑–∫–∏

---

## üîç –ö–ê–ö –ë–û–¢ –í–´–ë–ò–†–ê–ï–¢ –ö–ù–û–ü–ö–£?

### –°–¢–†–ê–¢–ï–ì–ò–Ø "first":
```python
# –ü—Å–µ–≤–¥–æ–∫–æ–¥:
for —Ä—è–¥ in –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞:
    for –∫–Ω–æ–ø–∫–∞ in —Ä—è–¥:
        if –∫–Ω–æ–ø–∫–∞.—Ç–∏–ø == callback:
            –ù–ê–ñ–ê–¢–¨(–∫–Ω–æ–ø–∫–∞)
            return  # –í—ã—Ö–æ–¥ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –Ω–∞–∂–∞—Ç–∏—è
```

### –°–¢–†–ê–¢–ï–ì–ò–Ø "custom":
```python
# –ü—Å–µ–≤–¥–æ–∫–æ–¥:
–∫–ª—é—á–µ–≤—ã–µ_—Å–ª–æ–≤–∞ = ['–º–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω', '–º–∞–≥–∏—Å—Ç—Ä–∞–ª—å']

for —Ä—è–¥ in –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞:
    for –∫–Ω–æ–ø–∫–∞ in —Ä—è–¥:
        for —Å–ª–æ–≤–æ in –∫–ª—é—á–µ–≤—ã–µ_—Å–ª–æ–≤–∞:
            if —Å–ª–æ–≤–æ in –∫–Ω–æ–ø–∫–∞.—Ç–µ–∫—Å—Ç.lowercase():
                –ù–ê–ñ–ê–¢–¨(–∫–Ω–æ–ø–∫–∞)
                return  # –ù–∞—à–ª–∏!

# –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ - –Ω–∞–∂–∏–º–∞–µ–º –ø–µ—Ä–≤—É—é
```

### –°–¢–†–ê–¢–ï–ì–ò–Ø "all":
```python
# –ü—Å–µ–≤–¥–æ–∫–æ–¥:
for —Ä—è–¥ in –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞:
    for –∫–Ω–æ–ø–∫–∞ in —Ä—è–¥:
        if –∫–Ω–æ–ø–∫–∞.—Ç–∏–ø == callback:
            –ù–ê–ñ–ê–¢–¨(–∫–Ω–æ–ø–∫–∞)
            –ñ–î–ê–¢–¨(0.05-0.15 —Å–µ–∫—É–Ω–¥)
```

---

## üìù –ü–†–ò–ú–ï–†–´ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò

### –ù–∞–∂–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ "–ü—Ä—è–º—ã–µ –ø–µ—Ä–µ–≤–æ–∑–∫–∏"
```python
# config.py
'BUTTON_STRATEGY': 'first'  # –ü–µ—Ä–≤–∞—è –∫–Ω–æ–ø–∫–∞ - —ç—Ç–æ "–ü—Ä—è–º—ã–µ"
```

### –ù–∞–∂–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ "–ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã–µ"
```python
# config.py
'BUTTON_STRATEGY': 'custom'
'BUTTON_KEYWORDS': ['–º–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω']
```

### –ù–∞–∂–∏–º–∞—Ç—å –∏ "–ü—Ä—è–º—ã–µ", –∏ "–ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω—ã–µ"
```python
# config.py
'BUTTON_STRATEGY': 'all'  # –ù–∞–∂–º—ë—Ç –≤—Å–µ –∫–Ω–æ–ø–∫–∏
```

---

## ‚ö° –°–ö–û–†–û–°–¢–¨ –†–ê–ë–û–¢–´

```
–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞:       ~0.001—Å (–º–≥–Ω–æ–≤–µ–Ω–Ω–æ)
–ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏:              ~0.05-0.15—Å (—Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å)
–ú–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:  ~0.5-1.0—Å (3 –Ω–∞–∂–∞—Ç–∏—è)

–ò–¢–û–ì–û: ~0.5-1.2 —Å–µ–∫—É–Ω–¥—ã –æ—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∞ –¥–æ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
```

---

## üîß –ë–´–°–¢–†–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê

### –ò–∑–º–µ–Ω–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä:
```bash
nano /root/automation/.env
# –ù–∞–π—Ç–∏: TRIGGER_MESSAGE=...
# –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –Ω—É–∂–Ω—ã–π —Ç–µ–∫—Å—Ç
```

### –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é:
```bash
nano /root/automation/config.py
# –ù–∞–π—Ç–∏: 'BUTTON_STRATEGY': 'first'
# –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞: 'custom' –∏–ª–∏ 'all'
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:
```bash
cd /root/automation
./stop_automation.sh
./start_automation.sh
```

---

## ‚ùì –ß–ê–°–¢–´–ï –í–û–ü–†–û–°–´

**Q: –ö–∞–∫ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ –∫–Ω–æ–ø–∫–∏ –≤–∏–¥–∏—Ç –±–æ—Ç?**
```bash
tail -f /root/automation/automation.log | grep "–†—è–¥"
# –£–≤–∏–¥–∏—Ç–µ: –†—è–¥ 1: ['üîî –°–ø–∏—Å–æ–∫ –ø—Ä—è–º—ã—Ö –ø–µ—Ä–µ–≤–æ–∑–æ–∫']
```

**Q: –ë–æ—Ç –Ω–µ –Ω–∞–∂–∏–º–∞–µ—Ç –Ω—É–∂–Ω—É—é –∫–Ω–æ–ø–∫—É?**
- –î–ª—è 2-–π –∏–ª–∏ 3-–π –∫–Ω–æ–ø–∫–∏ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é `'custom'`
- –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏

**Q: –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ–±—ã –±–æ—Ç –Ω–∞–∂–∏–º–∞–ª –≤—Ç–æ—Ä—É—é –∫–Ω–æ–ø–∫—É?**
```python
# –í config.py:
'BUTTON_STRATEGY': 'custom'
'BUTTON_KEYWORDS': ['–º–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω']  # –∏–ª–∏ –¥—Ä—É–≥–æ–µ —Å–ª–æ–≤–æ –∏–∑ 2-–π –∫–Ω–æ–ø–∫–∏
```

**Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é?**
–î–∞, –≤ config.py:
```python
'MULTI_STEP_ENABLED': False
```

---

## üìä –ü–û–õ–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–ß–∏—Ç–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –≤–µ—Ä—Å–∏—é:
```bash
ssh root@72.56.76.248
cat /root/automation/LOGIC_EXPLANATION.md
```
